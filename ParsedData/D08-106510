xp(&#945;H(E0, F)).
    Z(&#163;) and Z(&#163;w) represent the sums2 of weights of all paths in the lattices &#163;w and &#163; respectively.
  
  
    We now show how the Lattice MBR Decision Rule (Equation 6) can be implemented using Weighted Finite State Automata (Mohri, 1997).
    There are four steps involved in decoding starting from weighted finite-state automata representing the candidate outputs of a translation system.
    We will describe these 2in the log semiring, where log+(x, y) = log(ex + e'Y) is the collect operator (Mohri, 2002) steps in the setting where the evidence lattice &#163;e may be different from the hypothesis lattice &#163;h (Equation 2).
    Computing the set of n-grams N that occur in a finite automaton requires a traversal, in topological order, of all the arcs in the automaton.
    Because the lattice is acyclic, this is possible.
    Each state q in the automaton has a corresponding set of n-grams Nq ending there.
    Given an n-gram, w, we construct an automaton matching any